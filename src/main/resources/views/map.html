<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Heatmaps</title>
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
      #panel {
        position: absolute;
        top: 5px;
        left: 50%;
        margin-left: -180px;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=visualization"></script>
    <script>
// Adding 500 Data Points
var map, pointarray, heatmap;



function initialize() {
  //.5063
  var results = [ 29.426374999999993 , -98.49109249999998 , 21.79022519048387
	, 29.43117399999999 , -98.50732699999998 , 27.48223473110835
	, 29.43846299999999 , -98.48349949999998 , 24.801456481397032
	, 29.482215499999988 , -98.47069999999998 , 12.510859617576624
	, 29.50880749999999 , -98.41195449999998 , 16.829330797794128
	, 29.499627499999992 , -98.47057599999997 , 16.94997939216073
	, 29.506174999999992 , -98.41922099999996 , 17.787138786323215
	, 29.582119999999993 , -98.41333449999998 , 7.8950664165415
	, 29.575225999999994 , -98.45380249999997 , 12.108085890028459
	, 29.59375399999999 , -98.44424699999996 , 14.110152213753205
	, 29.584817499999993 , -98.43125449999997 , 6.057608582157402
	, 29.528412999999993 , -98.42190749999997 , 26.696675158175694
	, 29.520934999999994 , -98.38356199999998 , 11.947905273459018
	, 29.47898749999999 , -98.39099649999997 , 31.31381147419791
	, 29.524337499999987 , -98.33009099999997 , 10.924994754704354
	, 29.50555649999999 , -98.35932599999997 , 15.101798248570274
	, 29.545874999999988 , -98.32894249999997 , 7.3150105976163395
	, 29.569380999999993 , -98.31633699999998 , 10.478953207962029
	, 29.566839999999992 , -98.37527499999996 , 21.246994098876282
	, 29.590639999999993 , -98.40678099999997 , 8.17875951594365
	, 29.597943499999992 , -98.37250949999998 , 7.613561224084958
	, 29.64881799999999 , -98.42888049999999 , 5.8058770452364685
	, 29.712200999999993 , -98.39514899999998 , 4.853651090079351
	, 29.416239499999993 , -98.46724999999998 , 21.51248273332044
	, 29.40574549999999 , -98.44187799999997 , 35.54183486223519
	, 29.44002299999999 , -98.45104749999997 , 20.77272490468757
	, 29.41550449999999 , -98.41089999999997 , 15.439309804906133
	, 29.39075849999999 , -98.39742949999996 , 11.943328706276036
	, 29.46805599999999 , -98.39001449999998 , 9.464162239685772
	, 29.44210749999999 , -98.37481949999997 , 9.805035736344943
	, 29.486840499999992 , -98.30233199999998 , 7.857265482619025
	, 29.496087999999993 , -98.32017199999999 , 6.709830838799803
	, 29.480366999999994 , -98.32778399999998 , 7.062198090652824
	, 29.52965549999999 , -98.27905649999997 , 13.241800512484367
	, 29.407113499999994 , -98.48005699999996 , 16.442548418281806
	, 29.39689649999999 , -98.46735799999998 , 13.229763815589118
	, 29.38756149999999 , -98.46090849999999 , 16.407114190737804
	, 29.371410499999996 , -98.45746949999997 , 20.32515380144335
	, 29.381488499999993 , -98.43941999999998 , 16.998843304208826
	, 29.35792999999999 , -98.42677999999997 , 13.44873462292209
	, 29.32342899999999 , -98.40027949999997 , 9.531553302018668
	, 29.405360999999992 , -98.50340449999996 , 17.81663730381264
	, 29.379393499999992 , -98.52485949999996 , 16.303635500671113
	, 29.375815999999993 , -98.49521649999997 , 20.636848403922393
	, 29.362524499999992 , -98.51033399999997 , 18.27636322693912
	, 29.346117499999995 , -98.52525799999997 , 15.406881225301479
	, 29.352212999999992 , -98.49255899999997 , 15.804278253639943
	, 29.282587499999995 , -98.46738499999998 , 13.795749766483501
	, 29.199056499999994 , -98.44347399999998 , 14.889708392578845
	, 29.400324999999995 , -98.52005849999998 , 13.615554157238543
	, 29.411872499999994 , -98.53835599999996 , 32.95105442897367
	, 29.406578999999994 , -98.57541499999998 , 14.719053326015635
	, 29.371639999999992 , -98.55713049999999 , 13.206515404422404
	, 29.29783599999999 , -98.60779149999998 , 15.375307548466681
	, 29.34756999999999 , -98.59015249999997 , 16.505993308202804
	, 29.35508949999999 , -98.62816949999996 , 13.091122794891564
	, 29.38421499999999 , -98.64735499999996 , 10.534920383712299
	, 29.312808999999994 , -98.74601199999998 , 11.567131552413326
	, 29.264079999999993 , -98.72058499999997 , 13.08845788041288
	, 29.42170649999999 , -98.52092749999997 , 23.922058064831194
	, 29.43459799999999 , -98.53453449999998 , 18.058766176839747
	, 29.44318649999999 , -98.55078849999997 , 18.19020199546537
	, 29.42286349999999 , -98.55953699999998 , 17.523725078519682
	, 29.445039499999993 , -98.56753149999997 , 18.597403124570018
	, 29.441665499999992 , -98.58446749999996 , 19.832275071420312
	, 29.418913499999995 , -98.61559699999997 , 11.671266432558438
	, 29.411701499999992 , -98.63674699999999 , 16.872536224853334
	, 29.405851999999996 , -98.65628549999997 , 20.27755343780332
	, 29.43342299999999 , -98.67946449999998 , 7.971849883835471
	, 29.442129499999993 , -98.69833149999997 , 9.554960781052177
	, 29.403793499999992 , -98.67676299999997 , 11.443176507098965
	, 29.45487349999999 , -98.64940899999998 , 16.216570624383333
	, 29.400618999999992 , -98.75297099999997 , 10.930818827400854
	, 29.493833999999993 , -98.72510749999998 , 5.604107069790109
	, 29.45933399999999 , -98.53659799999997 , 11.691775794168095
	, 29.475720499999994 , -98.54050099999998 , 24.30833702487872
	, 29.470451499999992 , -98.58897899999997 , 19.734106300202736
	, 29.47834199999999 , -98.55691349999998 , 17.933647429832146
	, 29.50002749999999 , -98.56636449999998 , 15.64567214569313
	, 29.497831999999992 , -98.54149699999998 , 11.843696092273412
	, 29.521911499999987 , -98.56456649999996 , 30.967565527237802
	, 29.525866999999995 , -98.55011349999998 , 13.660304969063544
	, 29.54158799999999 , -98.56577699999997 , 23.44350598548982
	, 29.52707999999999 , -98.58011899999997 , 28.5614632735374
	, 29.50703149999999 , -98.59386349999997 , 29.045541350183917
	, 29.47555799999999 , -98.60203399999997 , 13.866719160388984
	, 29.50097999999999 , -98.63257349999998 , 10.47458356352951
	, 29.492571999999992 , -98.65906549999998 , 7.390787334712038
	, 29.50824949999999 , -98.69383349999997 , 15.640429723712097
	, 29.542709999999992 , -98.67317599999997 , 8.04425083199759
	, 29.550789499999993 , -98.68820749999998 , 6.856686951602809
	, 29.47195299999999 , -98.64326199999998 , 8.54008910885099
	, 29.492018999999992 , -98.67187149999997 , 8.813454833000263
	, 29.55124849999999 , -98.62481699999998 , 21.756936316417832
	, 29.577675499999998 , -98.58845699999998 , 12.455434997769807
	, 29.50933499999999 , -98.61656099999998 , 10.964650951516717
	, 29.57596499999999 , -98.61309299999996 , 71.46883358613348
	, 29.578606499999992 , -98.64137849999997 , 21.401199804999113
	, 29.55288499999999 , -98.63920649999997 , 7.222550012790284
	, 29.568138999999995 , -98.66264499999998 , 6.893085483058981
	, 29.715091499999993 , -98.64955349999997 , 7.767502054312042
	, 29.571625999999995 , -98.77700099999997 , 4.62904367457872
	, 29.45208549999999 , -98.48779199999998 , 18.7861582015762
	, 29.459680999999993 , -98.50358799999998 , 16.413185231089155
	, 29.473526999999994 , -98.50357399999997 , 12.475967117785352
	, 29.47615399999999 , -98.48451249999998 , 7.410029680270646
	, 29.50351599999999 , -98.51799999999997 , 26.71444730917289
	, 29.48578299999999 , -98.51690599999998 , 14.086026784771809
	, 29.54074649999999 , -98.50021699999996 , 10.192240169095324
	, 29.531156499999987 , -98.48964649999998 , 19.76834653998124
	, 29.54993049999999 , -98.51505149999997 , 26.731149349702445
	, 29.568590499999992 , -98.51200749999998 , 11.495698652054319
	, 29.574684499999996 , -98.57298049999999 , 8.410970077424833
	, 29.55784299999999 , -98.54280799999998 , 9.284965362032551
	, 29.704360499999996 , -98.48283149999997 , 5.457174634477056
	, 29.656118999999993 , -98.46522149999998 , 5.998372223960407
	, 29.65473099999999 , -98.51073599999997 , 5.2464307772843
	, 29.697758499999992 , -98.46642599999998 , 6.407116745113459
	, 29.62965549999999 , -98.47331599999995 , 11.603900322444996
	, 29.40757349999999 , -98.49502149999996 , 12.186430879353741
	, 29.691375499999992 , -98.57225249999998 , 4.310463882398634
	, 29.53547699999999 , -98.46374299999997 , 4.310463882398634 ];

  var heatmapData = [];
  var i = 0;
  while (i < results.length) {
    var latLng = new google.maps.LatLng(results[i],results[i+1]);
	var magnitude = results[i+2];
    var weightedLoc = {
      location: latLng,
      weight: 10*magnitude
    };
    heatmapData.push(weightedLoc);
    i++;
    i++;
    i++;
  }


  var mapOptions = {
    zoom: 13,
    center: heatmapData[0].location,
    mapTypeId: google.maps.MapTypeId.SATELLITE
  };

  map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  //var pointArray = new google.maps.MVCArray(heatmapData);

  heatmap = new google.maps.visualization.HeatmapLayer({
    data: heatmapData,
    dissapating: true,
    radius: 100
  });

  heatmap.setMap(map);
// radiusinMeters = 1632
}

function toggleHeatmap() {
  heatmap.setMap(heatmap.getMap() ? null : map);
}

function changeGradient() {
  var gradient = [
    'rgba(0, 255, 255, 0)',
    'rgba(0, 255, 255, 1)',
    'rgba(0, 191, 255, 1)',
    'rgba(0, 127, 255, 1)',
    'rgba(0, 63, 255, 1)',
    'rgba(0, 0, 255, 1)',
    'rgba(0, 0, 223, 1)',
    'rgba(0, 0, 191, 1)',
    'rgba(0, 0, 159, 1)',
    'rgba(0, 0, 127, 1)',
    'rgba(63, 0, 91, 1)',
    'rgba(127, 0, 63, 1)',
    'rgba(191, 0, 31, 1)',
    'rgba(255, 0, 0, 1)'
  ]
  heatmap.set('gradient', heatmap.get('gradient') ? null : gradient);
}

function changeRadius() {
  heatmap.set('radius', heatmap.get('radius') ? null : 100);
}

function changeOpacity() {
  heatmap.set('opacity', heatmap.get('opacity') ? null : 0.2);
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>

  <body>
    <div id="panel">
      <button onclick="toggleHeatmap()">Toggle Heatmap</button>
      <button onclick="changeGradient()">Change gradient</button>
      <button onclick="changeRadius()">Change radius</button>
      <button onclick="changeOpacity()">Change opacity</button>
    </div>
    <div id="map-canvas"></div>
  </body>
</html>

